<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>Dropship Mnager</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      body {
  font-size: .875rem;
}

.feather {
  width: 16px;
  height: 16px;
  vertical-align: text-bottom;
}

/*
 * Sidebar
 */

.sidebar {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  z-index: 100; /* Behind the navbar */
  padding: 48px 0 0; /* Height of navbar */
  box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
}

@media (max-width: 767.98px) {
  .sidebar {
    top: 5rem;
  }
}

.sidebar-sticky {
  position: relative;
  top: 0;
  height: calc(100vh - 48px);
  padding-top: .5rem;
  overflow-x: hidden;
  overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
}

@supports ((position: -webkit-sticky) or (position: sticky)) {
  .sidebar-sticky {
    position: -webkit-sticky;
    position: sticky;
  }
}

.sidebar .nav-link {
  font-weight: 500;
  color: #333;
}

.sidebar .nav-link .feather {
  margin-right: 4px;
  color: #999;
}

.sidebar .nav-link.active {
  color: #007bff;
}

.sidebar .nav-link:hover .feather,
.sidebar .nav-link.active .feather {
  color: inherit;
}

.sidebar-heading {
  font-size: .75rem;
  text-transform: uppercase;
}

/*
 * Navbar
 */

.navbar-brand {
  padding-top: .75rem;
  padding-bottom: .75rem;
  font-size: 1rem;
  background-color: rgba(0, 0, 0, .25);
  box-shadow: inset -1px 0 0 rgba(0, 0, 0, .25);
}

.navbar .navbar-toggler {
  top: .25rem;
  right: 1rem;
}

.navbar .form-control {
  padding: .75rem 1rem;
  border-width: 0;
  border-radius: 0;
}

.form-control-dark {
  color: #fff;
  background-color: rgba(255, 255, 255, .1);
  border-color: rgba(255, 255, 255, .1);
}

.form-control-dark:focus {
  border-color: transparent;
  box-shadow: 0 0 0 3px rgba(255, 255, 255, .25);
}

    </style>
  </head>
  <body>
    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">{{ info[0] }}</a>
  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <a class="nav-link" href="/signout">Sign out</a>
    </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="sidebar-sticky pt-3">
        <ul class="nav flex-column">
          
         
          <li class="nav-item">
            <a class="nav-link" target="_blank" href="/fetchdata">
              <span data-feather="shopping-cart"></span>
              Fetch products
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" target="_blank" href="/reloadStock">
              Update Stock
            </a>
          </li>

           <li class="nav-item">
            <a class="nav-link" target="_blank" href="/showcase">
              View Products
            </a>
          </li>
         
        </ul>

   
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
      

<div class="container">
    <div class="row">
    {% for item in arr %}
    
     <div class="col-sm-3" id="{{ item.split(".")[0] }}">
          <div class="card" style="width: 18rem;margin:2px;">
            <div class="card-body">
              <h5 class="card-title">{{ item.split(".")[0] }}</h5>
              <a href="/track2?filename={{ item.split(".")[0] }}" class="btn btn-primary">Track</a>
              <button onclick="delthis('{{ item }}')" class="btn btn-primary">delete</button>
            </div>
            </div>
        </div>

    {% endfor %}

    {% if arr |count ==0  %}
     <div class="col-sm-3">
          <div class="card" style="width: 18rem;margin:2px;">
            <div class="card-body">
              <h5 class="card-title">NO CSV AVIALABLE</h5>
              <a href="#" class="btn btn-primary">Check Updates</a>
            </div>
            </div>
        </div>
    {% endif %}
       
    </div>
</div>


<div class="container">
  <div class="row">
      <div class="col-sm-12">
                <div class="card" style="margin:2px;">
                  <div class="card-body">

                    <form class="form-inline" method="GET" action="/addCard">
                    <div class="form-group mb-2">
                      <label for="staticEmail2" class="sr-only">ADD CSV</label>
                      <input type="text"  readonly class="form-control-plaintext" id="staticEmail2" value="Add Selection">
                    </div>
                    
                    <div class="form-group mx-sm-3 mb-2">
                      <label for="inputPassword2" name="filename" class="sr-only">Filename</label>
                      <input type="text" id="filenameid"  onchange="filenameInput()"  name="filename" required class="form-control" id="inputPassword2" placeholder="filename">
                    </div>
                    
                     <div class="form-group mx-sm-4 mb-4">
                      <select  required class="form-control " name="zero">
                      <option value="0">Remove zero quantity products?</option>
                        <option value="0">Yes</option>
                        <option value="1">No</option>
                      </select>
                    </div>
                    <button type="submit" class="btn btn-primary mb-2">Continue</button>
                  </form>

                  </div>
                
              </div>
    </div>
  </div>
</div>


      
      
    </main>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
<script type="text/javascript">


function delthis(filename)
{
    var pass = prompt("Please enter password to delete", "password");
    if(pass=="123")
    {
      $.ajax({
        type: 'GET',
        url: '/deleteCard?filename='+filename,
        success: function(data){

          alert(data);
          document.getElementById(filename.split(".")[0]).style.display="none";
        }
    });
    }
    else{
      alert("Wrong Password");
    }
}

function filenameInput(){

arr = [
  {% for item in arr %}
    
    "{{ item.split(".")[0] }}",

  {% endfor %}
];
var equal = 0;

var name = document.getElementById("filenameid").value;

for(let k=0;k<arr.length;k++)
{
  console.log(arr[k].id)
  if (arr[k].id == name){
    equal++;
  }
}
if(equal>0){
  document.getElementById("filenameid").value="";
  alert("Don't use Duplicate Values");
}

}






</script>
</body>
</html>
